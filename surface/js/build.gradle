defaultTasks "buildAll"

task stage (type:Task) {
	ant.concat(destfile:"${surfaceBuild}/${jsLibs}") {
		fileset(file:'libs/classlist.js')
		fileset(file:'libs/matchmedia.js')
		fileset(file:'libs/underscore.js')
		fileset(file:'libs/jquery-2.1.1.js')
		fileset(file:'libs/jquery.tap.js')
		fileset(file:'libs/Args.js')
		fileset(file:'libs/cache.js')
		fileset(file:'libs/es6-promise-2.0.1.js')
		fileset(file:'libs/regula-1.3.4.js')
		fileset(file:'libs/modernizr.js')
		fileset(file:'libs/moment.js')
		fileset(file:'libs/pikaday-time.js')
		fileset(file:'libs/jQuery.extendext.js')
		fileset(file:'libs/microevent.js')
		fileset(file:'libs/postal.js')
		fileset(file:'libs/mensch.js')
		fileset(file:'libs/json5.js')
		fileset(file:'libs/wampy.js')
		fileset(file:'libs/openseadragon-all.js')
		fileset(file:'libs/reconnecting-websocket.js')
		fileset(file:'libs/rx.all.compat.js')
		fileset(file:'libs/rx.dom.compat.js')
		fileset(file:'libs/shortid.js')
		fileset(file:'libs/mutation-summary.js')
		fileset(file:'libs/jquery.dropdown.js')
		fileset(file:'src/util/Construct.js')
		fileset(dir:'src',includes:'**/*.js', excludes:'src/util/Construct.js')
	}
	ant.gzip( src:"${surfaceBuild}/${jsLibs}",destfile:"${surfaceBuild}/${jsLibs}.gz")
	ant.gzip( src:"libs/polymer.js",destfile:"${surfaceBuild}/polymer.js.gz")
	ant.gzip( src:"libs/webcomponents.js",destfile:"${surfaceBuild}/webcomponents.js.gz")
	ant.gzip( src:"libs/webcomponents-lite.js",destfile:"${surfaceBuild}/webcomponents-lite.js.gz")
	ant.delete( file:"${surfaceBuild}/${jsLibs}")
}

task buildAll (type:Task) {  dependsOn stage }
